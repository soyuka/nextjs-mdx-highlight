---
type: Class
---

# [ApiPlatform\Doctrine\EventListener\PurgeHttpCacheListener](/docs/v3.1/reference/Doctrine/EventListener/PurgeHttpCacheListener)

Purges responses containing modified entities from the proxy cache.


```php
class ApiPlatform\Doctrine\EventListener\PurgeHttpCacheListener
{
    public __construct(`<a href="/docs/v3.1/reference/HttpCache/PurgerInterface">ApiPlatform\HttpCache\PurgerInterface</a>` $purger, `<a href="/docs/v3.1/reference/Api/IriConverterInterface">ApiPlatform\Api\IriConverterInterface</a>` $iriConverter, `<a href="/docs/v3.1/reference/Api/ResourceClassResolverInterface">ApiPlatform\Api\ResourceClassResolverInterface</a>` $resourceClassResolver, null|Symfony\Component\PropertyAccess\PropertyAccessorInterface $propertyAccessor)
    public preUpdate(Doctrine\ORM\Event\PreUpdateEventArgs $eventArgs): null
    public onFlush(Doctrine\ORM\Event\OnFlushEventArgs $eventArgs): null
    public postFlush(): null
}
```
## Methods

### __construct



```php
public __construct(`<a href="/docs/v3.1/reference/HttpCache/PurgerInterface">ApiPlatform\HttpCache\PurgerInterface</a>` $purger, `<a href="/docs/v3.1/reference/Api/IriConverterInterface">ApiPlatform\Api\IriConverterInterface</a>` $iriConverter, `<a href="/docs/v3.1/reference/Api/ResourceClassResolverInterface">ApiPlatform\Api\ResourceClassResolverInterface</a>` $resourceClassResolver, null|Symfony\Component\PropertyAccess\PropertyAccessorInterface $propertyAccessor)
```

#### Parameters

<table><tbody>
<tr><td>purger</td><td>`<a href="/docs/v3.1/reference/HttpCache/PurgerInterface">ApiPlatform\HttpCache\PurgerInterface</a>`</td><td></td></tr><tr><td>iriConverter</td><td>`<a href="/docs/v3.1/reference/Api/IriConverterInterface">ApiPlatform\Api\IriConverterInterface</a>`</td><td></td></tr><tr><td>resourceClassResolver</td><td>`<a href="/docs/v3.1/reference/Api/ResourceClassResolverInterface">ApiPlatform\Api\ResourceClassResolverInterface</a>`</td><td></td></tr><tr><td>propertyAccessor</td><td>Symfony\Component\PropertyAccess\PropertyAccessorInterface</td><td></td></tr>
</tbody>
</table>

### preUpdate

Collects tags from the previous and the current version of the updated entities to purge related documents.

```php
public preUpdate(Doctrine\ORM\Event\PreUpdateEventArgs $eventArgs): null
```

#### Parameters

<table><tbody>
<tr><td>eventArgs</td><td>Doctrine\ORM\Event\PreUpdateEventArgs</td><td></td></tr>
</tbody>
</table>

#### Returns

null

### onFlush

Collects tags from inserted and deleted entities, including relations.

```php
public onFlush(Doctrine\ORM\Event\OnFlushEventArgs $eventArgs): null
```

#### Parameters

<table><tbody>
<tr><td>eventArgs</td><td>Doctrine\ORM\Event\OnFlushEventArgs</td><td></td></tr>
</tbody>
</table>

#### Returns

null

### postFlush

Purges tags collected during this request, and clears the tag list.

```php
public postFlush(): null
```

#### Returns

null
