---
type: Class
---

# [ApiPlatform\Doctrine\Common\Tests\State\PersistProcessorTest](/docs/vmain/reference/Doctrine/Common/Tests/State/PersistProcessorTest)



```php
class ApiPlatform\Doctrine\Common\Tests\State\PersistProcessorTest extends PHPUnit\Framework\TestCase implements Countable, PHPUnit\Framework\Test, PHPUnit\Framework\SelfDescribing, PHPUnit\Framework\Reorderable
{
    public testConstruct(): null
    public testPersist(): null
    public testPersistIfEntityAlreadyManaged(): null
    public testPersistWithNullManager(): null
    public getTrackingPolicyParameters(): array
    public testTrackingPolicy(string $metadataClass, bool $deferredExplicit, bool $persisted): null
    public any(): PHPUnit\Framework\MockObject\Rule\AnyInvokedCount
    public never(): PHPUnit\Framework\MockObject\Rule\InvokedCount
    public atLeast(int $requiredInvocations): PHPUnit\Framework\MockObject\Rule\InvokedAtLeastCount
    public atLeastOnce(): PHPUnit\Framework\MockObject\Rule\InvokedAtLeastOnce
    public once(): PHPUnit\Framework\MockObject\Rule\InvokedCount
    public exactly(int $count): PHPUnit\Framework\MockObject\Rule\InvokedCount
    public atMost(int $allowedInvocations): PHPUnit\Framework\MockObject\Rule\InvokedAtMostCount
    public at(int $index): PHPUnit\Framework\MockObject\Rule\InvokedAtIndex
    public returnValue($value): PHPUnit\Framework\MockObject\Stub\ReturnStub
    public returnValueMap(array $valueMap): PHPUnit\Framework\MockObject\Stub\ReturnValueMap
    public returnArgument(int $argumentIndex): PHPUnit\Framework\MockObject\Stub\ReturnArgument
    public returnCallback($callback): PHPUnit\Framework\MockObject\Stub\ReturnCallback
    public returnSelf(): PHPUnit\Framework\MockObject\Stub\ReturnSelf
    public throwException(Throwable $exception): PHPUnit\Framework\MockObject\Stub\Exception
    public onConsecutiveCalls($args): PHPUnit\Framework\MockObject\Stub\ConsecutiveCalls
    public __construct(null|string $name, array $data, int|string $dataName)
    public setUpBeforeClass(): null
    public tearDownAfterClass(): null
    protected setUp(): null
    protected assertPreConditions(): null
    protected assertPostConditions(): null
    protected tearDown(): null
    public toString(): string
    public count(): int
    public getActualOutputForAssertion(): string
    public expectOutputRegex(string $expectedRegex): null
    public expectOutputString(string $expectedString): null
    public expectException(string $exception): null
    public expectExceptionCode(int|string $code): null
    public expectExceptionMessage(string $message): null
    public expectExceptionMessageMatches(string $regularExpression): null
    public expectExceptionObject(Exception $exception): null
    public expectNotToPerformAssertions(): null
    public expectDeprecation(): null
    public expectDeprecationMessage(string $message): null
    public expectDeprecationMessageMatches(string $regularExpression): null
    public expectNotice(): null
    public expectNoticeMessage(string $message): null
    public expectNoticeMessageMatches(string $regularExpression): null
    public expectWarning(): null
    public expectWarningMessage(string $message): null
    public expectWarningMessageMatches(string $regularExpression): null
    public expectError(): null
    public expectErrorMessage(string $message): null
    public expectErrorMessageMatches(string $regularExpression): null
    public getStatus(): int
    public markAsRisky(): null
    public getStatusMessage(): string
    public hasFailed(): bool
    public run(null|PHPUnit\Framework\TestResult $result): PHPUnit\Framework\TestResult
    public getMockBuilder(string $className): PHPUnit\Framework\MockObject\MockBuilder
    public registerComparator(SebastianBergmann\Comparator\Comparator $comparator): null
    public doubledTypes(): array&lt;int, string&gt;
    public getGroups(): array
    public setGroups(array $groups): null
    public getName(bool $withDataSet): string
    public getSize(): int
    public hasSize(): bool
    public isSmall(): bool
    public isMedium(): bool
    public isLarge(): bool
    public getActualOutput(): string
    public hasOutput(): bool
    public doesNotPerformAssertions(): bool
    public hasExpectationOnOutput(): bool
    public getExpectedException(): string
    public getExpectedExceptionCode(): int|string
    public getExpectedExceptionMessage(): string
    public getExpectedExceptionMessageRegExp(): string
    public setRegisterMockObjectsFromTestArgumentsRecursively(bool $flag): null
    public runBare(): null
    public setName(string $name): null
    public setDependencies(array<int, PHPUnit\Framework\ExecutionOrderDependency> $dependencies): null
    public setDependencyInput(array $dependencyInput): null
    public setBeStrictAboutChangesToGlobalState(null|bool $beStrictAboutChangesToGlobalState): null
    public setBackupGlobals(null|bool $backupGlobals): null
    public setBackupStaticAttributes(null|bool $backupStaticAttributes): null
    public setRunTestInSeparateProcess(bool $runTestInSeparateProcess): null
    public setRunClassInSeparateProcess(bool $runClassInSeparateProcess): null
    public setPreserveGlobalState(bool $preserveGlobalState): null
    public setInIsolation(bool $inIsolation): null
    public isInIsolation(): bool
    public getResult()
    public setResult($result): null
    public setOutputCallback(callable $callback): null
    public getTestResultObject(): PHPUnit\Framework\TestResult
    public setTestResultObject(PHPUnit\Framework\TestResult $result): null
    public registerMockObject(PHPUnit\Framework\MockObject\MockObject $mockObject): null
    public addToAssertionCount(int $count): null
    public getNumAssertions(): int
    public usesDataProvider(): bool
    public dataName(): int|string
    public getDataSetAsString(bool $includeData): string
    public getProvidedData(): array
    public addWarning(string $warning): null
    public sortId(): string
    public provides(): array&lt;int, PHPUnit\Framework\ExecutionOrderDependency&gt;
    public requires(): array&lt;int, PHPUnit\Framework\ExecutionOrderDependency&gt;
    protected runTest()
    protected iniSet(string $varName, string $newValue): null
    protected setLocale($args): null
    protected createStub(string $originalClassName): PHPUnit\Framework\MockObject\Stub
    protected createMock(string $originalClassName): PHPUnit\Framework\MockObject\MockObject
    protected createConfiguredMock(string $originalClassName, array $configuration): PHPUnit\Framework\MockObject\MockObject
    protected createPartialMock(string $originalClassName, array<int, string> $methods): PHPUnit\Framework\MockObject\MockObject
    protected createTestProxy(string $originalClassName, array $constructorArguments): PHPUnit\Framework\MockObject\MockObject
    protected getMockClass(string $originalClassName, array $methods, array $arguments, string $mockClassName, bool $callOriginalConstructor, bool $callOriginalClone, bool $callAutoload, bool $cloneArguments): string
    protected getMockForAbstractClass(string $originalClassName, array $arguments, string $mockClassName, bool $callOriginalConstructor, bool $callOriginalClone, bool $callAutoload, array $mockedMethods, bool $cloneArguments): PHPUnit\Framework\MockObject\MockObject
    protected getMockFromWsdl(string $wsdlFile, string $originalClassName, string $mockClassName, array $methods, bool $callOriginalConstructor, array $options): PHPUnit\Framework\MockObject\MockObject
    protected getMockForTrait(string $traitName, array $arguments, string $mockClassName, bool $callOriginalConstructor, bool $callOriginalClone, bool $callAutoload, array $mockedMethods, bool $cloneArguments): PHPUnit\Framework\MockObject\MockObject
    protected getObjectForTrait(string $traitName, array $arguments, string $traitClassName, bool $callOriginalConstructor, bool $callOriginalClone, bool $callAutoload): object
    protected prophesize(null|string $classOrInterface): Prophecy\Prophecy\ObjectProphecy
    protected createResult(): PHPUnit\Framework\TestResult
    protected onNotSuccessfulTest(Throwable $t): null
    protected recordDoubledType(string $originalClassName): null
    public assertArrayHasKey(int|string $key, array|ArrayAccess $array, string $message): null
    public assertArrayNotHasKey(int|string $key, array|ArrayAccess $array, string $message): null
    public assertContains($needle, iterable $haystack, string $message): null
    public assertContainsEquals($needle, iterable $haystack, string $message): null
    public assertNotContains($needle, iterable $haystack, string $message): null
    public assertNotContainsEquals($needle, iterable $haystack, string $message): null
    public assertContainsOnly(string $type, iterable $haystack, null|bool $isNativeType, string $message): null
    public assertContainsOnlyInstancesOf(string $className, iterable $haystack, string $message): null
    public assertNotContainsOnly(string $type, iterable $haystack, null|bool $isNativeType, string $message): null
    public assertCount(int $expectedCount, Countable|iterable $haystack, string $message): null
    public assertNotCount(int $expectedCount, Countable|iterable $haystack, string $message): null
    public assertEquals($expected, $actual, string $message): null
    public assertEqualsCanonicalizing($expected, $actual, string $message): null
    public assertEqualsIgnoringCase($expected, $actual, string $message): null
    public assertEqualsWithDelta($expected, $actual, float $delta, string $message): null
    public assertNotEquals($expected, $actual, string $message): null
    public assertNotEqualsCanonicalizing($expected, $actual, string $message): null
    public assertNotEqualsIgnoringCase($expected, $actual, string $message): null
    public assertNotEqualsWithDelta($expected, $actual, float $delta, string $message): null
    public assertObjectEquals(object $expected, object $actual, string $method, string $message): null
    public assertEmpty($actual, string $message): null
    public assertNotEmpty($actual, string $message): null
    public assertGreaterThan($expected, $actual, string $message): null
    public assertGreaterThanOrEqual($expected, $actual, string $message): null
    public assertLessThan($expected, $actual, string $message): null
    public assertLessThanOrEqual($expected, $actual, string $message): null
    public assertFileEquals(string $expected, string $actual, string $message): null
    public assertFileEqualsCanonicalizing(string $expected, string $actual, string $message): null
    public assertFileEqualsIgnoringCase(string $expected, string $actual, string $message): null
    public assertFileNotEquals(string $expected, string $actual, string $message): null
    public assertFileNotEqualsCanonicalizing(string $expected, string $actual, string $message): null
    public assertFileNotEqualsIgnoringCase(string $expected, string $actual, string $message): null
    public assertStringEqualsFile(string $expectedFile, string $actualString, string $message): null
    public assertStringEqualsFileCanonicalizing(string $expectedFile, string $actualString, string $message): null
    public assertStringEqualsFileIgnoringCase(string $expectedFile, string $actualString, string $message): null
    public assertStringNotEqualsFile(string $expectedFile, string $actualString, string $message): null
    public assertStringNotEqualsFileCanonicalizing(string $expectedFile, string $actualString, string $message): null
    public assertStringNotEqualsFileIgnoringCase(string $expectedFile, string $actualString, string $message): null
    public assertIsReadable(string $filename, string $message): null
    public assertIsNotReadable(string $filename, string $message): null
    public assertNotIsReadable(string $filename, string $message): null
    public assertIsWritable(string $filename, string $message): null
    public assertIsNotWritable(string $filename, string $message): null
    public assertNotIsWritable(string $filename, string $message): null
    public assertDirectoryExists(string $directory, string $message): null
    public assertDirectoryDoesNotExist(string $directory, string $message): null
    public assertDirectoryNotExists(string $directory, string $message): null
    public assertDirectoryIsReadable(string $directory, string $message): null
    public assertDirectoryIsNotReadable(string $directory, string $message): null
    public assertDirectoryNotIsReadable(string $directory, string $message): null
    public assertDirectoryIsWritable(string $directory, string $message): null
    public assertDirectoryIsNotWritable(string $directory, string $message): null
    public assertDirectoryNotIsWritable(string $directory, string $message): null
    public assertFileExists(string $filename, string $message): null
    public assertFileDoesNotExist(string $filename, string $message): null
    public assertFileNotExists(string $filename, string $message): null
    public assertFileIsReadable(string $file, string $message): null
    public assertFileIsNotReadable(string $file, string $message): null
    public assertFileNotIsReadable(string $file, string $message): null
    public assertFileIsWritable(string $file, string $message): null
    public assertFileIsNotWritable(string $file, string $message): null
    public assertFileNotIsWritable(string $file, string $message): null
    public assertTrue($condition, string $message): null
    public assertNotTrue($condition, string $message): null
    public assertFalse($condition, string $message): null
    public assertNotFalse($condition, string $message): null
    public assertNull($actual, string $message): null
    public assertNotNull($actual, string $message): null
    public assertFinite($actual, string $message): null
    public assertInfinite($actual, string $message): null
    public assertNan($actual, string $message): null
    public assertClassHasAttribute(string $attributeName, string $className, string $message): null
    public assertClassNotHasAttribute(string $attributeName, string $className, string $message): null
    public assertClassHasStaticAttribute(string $attributeName, string $className, string $message): null
    public assertClassNotHasStaticAttribute(string $attributeName, string $className, string $message): null
    public assertObjectHasAttribute(string $attributeName, object $object, string $message): null
    public assertObjectNotHasAttribute(string $attributeName, object $object, string $message): null
    public assertObjectHasProperty(string $propertyName, object $object, string $message): null
    public assertObjectNotHasProperty(string $propertyName, object $object, string $message): null
    public assertSame($expected, $actual, string $message): null
    public assertNotSame($expected, $actual, string $message): null
    public assertInstanceOf(string $expected, $actual, string $message): null
    public assertNotInstanceOf(string $expected, $actual, string $message): null
    public assertIsArray($actual, string $message): null
    public assertIsBool($actual, string $message): null
    public assertIsFloat($actual, string $message): null
    public assertIsInt($actual, string $message): null
    public assertIsNumeric($actual, string $message): null
    public assertIsObject($actual, string $message): null
    public assertIsResource($actual, string $message): null
    public assertIsClosedResource($actual, string $message): null
    public assertIsString($actual, string $message): null
    public assertIsScalar($actual, string $message): null
    public assertIsCallable($actual, string $message): null
    public assertIsIterable($actual, string $message): null
    public assertIsNotArray($actual, string $message): null
    public assertIsNotBool($actual, string $message): null
    public assertIsNotFloat($actual, string $message): null
    public assertIsNotInt($actual, string $message): null
    public assertIsNotNumeric($actual, string $message): null
    public assertIsNotObject($actual, string $message): null
    public assertIsNotResource($actual, string $message): null
    public assertIsNotClosedResource($actual, string $message): null
    public assertIsNotString($actual, string $message): null
    public assertIsNotScalar($actual, string $message): null
    public assertIsNotCallable($actual, string $message): null
    public assertIsNotIterable($actual, string $message): null
    public assertMatchesRegularExpression(string $pattern, string $string, string $message): null
    public assertRegExp(string $pattern, string $string, string $message): null
    public assertDoesNotMatchRegularExpression(string $pattern, string $string, string $message): null
    public assertNotRegExp(string $pattern, string $string, string $message): null
    public assertSameSize(Countable|iterable $expected, Countable|iterable $actual, string $message): null
    public assertNotSameSize(Countable|iterable $expected, Countable|iterable $actual, string $message): null
    public assertStringMatchesFormat(string $format, string $string, string $message): null
    public assertStringNotMatchesFormat(string $format, string $string, string $message): null
    public assertStringMatchesFormatFile(string $formatFile, string $string, string $message): null
    public assertStringNotMatchesFormatFile(string $formatFile, string $string, string $message): null
    public assertStringStartsWith(string $prefix, string $string, string $message): null
    public assertStringStartsNotWith(string $prefix, string $string, string $message): null
    public assertStringContainsString(string $needle, string $haystack, string $message): null
    public assertStringContainsStringIgnoringCase(string $needle, string $haystack, string $message): null
    public assertStringNotContainsString(string $needle, string $haystack, string $message): null
    public assertStringNotContainsStringIgnoringCase(string $needle, string $haystack, string $message): null
    public assertStringEndsWith(string $suffix, string $string, string $message): null
    public assertStringEndsNotWith(string $suffix, string $string, string $message): null
    public assertXmlFileEqualsXmlFile(string $expectedFile, string $actualFile, string $message): null
    public assertXmlFileNotEqualsXmlFile(string $expectedFile, string $actualFile, string $message): null
    public assertXmlStringEqualsXmlFile(string $expectedFile, DOMDocument|string $actualXml, string $message): null
    public assertXmlStringNotEqualsXmlFile(string $expectedFile, DOMDocument|string $actualXml, string $message): null
    public assertXmlStringEqualsXmlString(DOMDocument|string $expectedXml, DOMDocument|string $actualXml, string $message): null
    public assertXmlStringNotEqualsXmlString(DOMDocument|string $expectedXml, DOMDocument|string $actualXml, string $message): null
    public assertEqualXMLStructure(DOMElement $expectedElement, DOMElement $actualElement, bool $checkAttributes, string $message): null
    public assertThat($value, PHPUnit\Framework\Constraint\Constraint $constraint, string $message): null
    public assertJson(string $actualJson, string $message): null
    public assertJsonStringEqualsJsonString(string $expectedJson, string $actualJson, string $message): null
    public assertJsonStringNotEqualsJsonString(string $expectedJson, string $actualJson, string $message): null
    public assertJsonStringEqualsJsonFile(string $expectedFile, string $actualJson, string $message): null
    public assertJsonStringNotEqualsJsonFile(string $expectedFile, string $actualJson, string $message): null
    public assertJsonFileEqualsJsonFile(string $expectedFile, string $actualFile, string $message): null
    public assertJsonFileNotEqualsJsonFile(string $expectedFile, string $actualFile, string $message): null
    public logicalAnd(): PHPUnit\Framework\Constraint\LogicalAnd
    public logicalOr(): PHPUnit\Framework\Constraint\LogicalOr
    public logicalNot(PHPUnit\Framework\Constraint\Constraint $constraint): PHPUnit\Framework\Constraint\LogicalNot
    public logicalXor(): PHPUnit\Framework\Constraint\LogicalXor
    public anything(): PHPUnit\Framework\Constraint\IsAnything
    public isTrue(): PHPUnit\Framework\Constraint\IsTrue
    public callback(callable $callback): PHPUnit\Framework\Constraint\Callback
    public isFalse(): PHPUnit\Framework\Constraint\IsFalse
    public isJson(): PHPUnit\Framework\Constraint\IsJson
    public isNull(): PHPUnit\Framework\Constraint\IsNull
    public isFinite(): PHPUnit\Framework\Constraint\IsFinite
    public isInfinite(): PHPUnit\Framework\Constraint\IsInfinite
    public isNan(): PHPUnit\Framework\Constraint\IsNan
    public containsEqual($value): PHPUnit\Framework\Constraint\TraversableContainsEqual
    public containsIdentical($value): PHPUnit\Framework\Constraint\TraversableContainsIdentical
    public containsOnly(string $type): PHPUnit\Framework\Constraint\TraversableContainsOnly
    public containsOnlyInstancesOf(string $className): PHPUnit\Framework\Constraint\TraversableContainsOnly
    public arrayHasKey(int|string $key): PHPUnit\Framework\Constraint\ArrayHasKey
    public equalTo($value): PHPUnit\Framework\Constraint\IsEqual
    public equalToCanonicalizing($value): PHPUnit\Framework\Constraint\IsEqualCanonicalizing
    public equalToIgnoringCase($value): PHPUnit\Framework\Constraint\IsEqualIgnoringCase
    public equalToWithDelta($value, float $delta): PHPUnit\Framework\Constraint\IsEqualWithDelta
    public isEmpty(): PHPUnit\Framework\Constraint\IsEmpty
    public isWritable(): PHPUnit\Framework\Constraint\IsWritable
    public isReadable(): PHPUnit\Framework\Constraint\IsReadable
    public directoryExists(): PHPUnit\Framework\Constraint\DirectoryExists
    public fileExists(): PHPUnit\Framework\Constraint\FileExists
    public greaterThan($value): PHPUnit\Framework\Constraint\GreaterThan
    public greaterThanOrEqual($value): PHPUnit\Framework\Constraint\LogicalOr
    public classHasAttribute(string $attributeName): PHPUnit\Framework\Constraint\ClassHasAttribute
    public classHasStaticAttribute(string $attributeName): PHPUnit\Framework\Constraint\ClassHasStaticAttribute
    public objectHasAttribute($attributeName): PHPUnit\Framework\Constraint\ObjectHasAttribute
    public identicalTo($value): PHPUnit\Framework\Constraint\IsIdentical
    public isInstanceOf(string $className): PHPUnit\Framework\Constraint\IsInstanceOf
    public isType(string $type): PHPUnit\Framework\Constraint\IsType
    public lessThan($value): PHPUnit\Framework\Constraint\LessThan
    public lessThanOrEqual($value): PHPUnit\Framework\Constraint\LogicalOr
    public matchesRegularExpression(string $pattern): PHPUnit\Framework\Constraint\RegularExpression
    public matches(string $string): PHPUnit\Framework\Constraint\StringMatchesFormatDescription
    public stringStartsWith($prefix): PHPUnit\Framework\Constraint\StringStartsWith
    public stringContains(string $string, bool $case): PHPUnit\Framework\Constraint\StringContains
    public stringEndsWith(string $suffix): PHPUnit\Framework\Constraint\StringEndsWith
    public countOf(int $count): PHPUnit\Framework\Constraint\Count
    public objectEquals(object $object, string $method): PHPUnit\Framework\Constraint\ObjectEquals
    public fail(string $message): null
    public markTestIncomplete(string $message): null
    public markTestSkipped(string $message): null
    public getCount(): int
    public resetCount(): null
    protected verifyProphecyDoubles(): null
    protected tearDownProphecy(): null
}
```
## Properties
### backupGlobals

```php
bool $backupGlobals
```



### backupGlobalsExcludeList

```php
array&lt;int, string&gt; $backupGlobalsExcludeList
```



### backupGlobalsBlacklist

```php
array&lt;int, string&gt; $backupGlobalsBlacklist
```




### backupStaticAttributes

```php
bool $backupStaticAttributes
```



### backupStaticAttributesExcludeList

```php
array&lt;string, array&lt;int, string&gt;&gt; $backupStaticAttributesExcludeList
```



### backupStaticAttributesBlacklist

```php
array&lt;string, array&lt;int, string&gt;&gt; $backupStaticAttributesBlacklist
```




### runTestInSeparateProcess

```php
bool $runTestInSeparateProcess
```



### preserveGlobalState

```php
bool $preserveGlobalState
```



### providedTests

```php
array&lt;int, PHPUnit\Framework\ExecutionOrderDependency&gt; $providedTests
```



## Methods

### testConstruct



```php
public testConstruct(): null
```

#### Returns

null

### testPersist



```php
public testPersist(): null
```

#### Returns

null

### testPersistIfEntityAlreadyManaged



```php
public testPersistIfEntityAlreadyManaged(): null
```

#### Returns

null

### testPersistWithNullManager



```php
public testPersistWithNullManager(): null
```

#### Returns

null

### getTrackingPolicyParameters



```php
public getTrackingPolicyParameters(): array
```

#### Returns

array

### testTrackingPolicy



```php
public testTrackingPolicy(string $metadataClass, bool $deferredExplicit, bool $persisted): null
```

#### Parameters

<table><tbody>
<tr><td>metadataClass</td><td>string</td><td></td></tr><tr><td>deferredExplicit</td><td>bool</td><td></td></tr><tr><td>persisted</td><td>bool</td><td></td></tr>
</tbody>
</table>

#### Returns

null

### prophesize



```php
protected prophesize(null|string $classOrInterface): Prophecy\Prophecy\ObjectProphecy
```

#### Parameters

<table><tbody>
<tr><td>classOrInterface</td><td>string</td><td></td></tr>
</tbody>
</table>

#### Returns

Prophecy\Prophecy\ObjectProphecy

### verifyProphecyDoubles



```php
protected verifyProphecyDoubles(): null
```

#### Returns

null

### tearDownProphecy



```php
protected tearDownProphecy(): null
```

#### Returns

null
